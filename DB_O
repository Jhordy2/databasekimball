create database DATAORIGEN
use DATAORIGEN
create table ITEMARTICULO (
KEY_ARTICULO int IDENTITY (1,1),
CODIGO_ARTICULO INT NOT NULL,
NOMBRE_LINEA varchar (50) NOT NULL,
NOMBRE_MARCA varchar (50) NOT NULL,
NOMBRE_ARTICULO varchar (70) NOT NULL,
CODIGO_LINEA char (18) NULL,
CODIGO_MARCA INT NULL)
go
ALTER TABLE ITEMARTICULO ADD CONSTRAINT XPKKITEMARTICULO PRIMARY KEY CLUSTERED (KEY_ARTICULO ASC)
go
create table ITEMCLIENTE(
KEY_CLIENTE int IDENTITY (1,1),
CODIGO_CLIENTE INT NOT NULL,
NOMBRE_CLIENTE varchar (70) NOT NULL)
go
ALTER TABLE ITEMCLIENTE ADD CONSTRAINT XPKITEMCLIENTE PRIMARY KEY CLUSTERED (KEY_CLIENTE ASC)
go
create table ITEMUBICACION(
KEY_UBICACION int IDENTITY (1,1),
CODIGO_UBICACION INT NOT NULL,
NOMBRE_UBICACION varchar (50) NULL)
go
ALTER TABLE ITEMUBICACION ADD CONSTRAINT XPKITEMUBICACION PRIMARY KEY CLUSTERED (KEY_UBICACION ASC)
go
create table ITEMTIEMPO(
KEY_TIEMPO int IDENTITY (1,1),
FECHA datetime NOT NULL,
ANO char (4) NOT NULL,
TRIMESTRE nvarchar (20) NOT NULL,
MES nchar (30) NOT NULL,
DIA nchar (30) NOT NULL)
go
ALTER TABLE ITEMTIEMPO ADD CONSTRAINT XPKITEMTIEMPO PRIMARY KEY CLUSTERED (KEY_TIEMPO ASC)
go
create table ITEMVENDEDOR(
KEY_VENDEDOR int IDENTITY (1,1),
CODIGO_VENDEDOR varchar (20) NOT NULL,
NOMBRE_VENDEDOR varchar (30) NOT NULL)
go
ALTER TABLE ITEMVENDEDOR ADD CONSTRAINT XPKITEMVENDEDOR PRIMARY KEY CLUSTERED (KEY_VENDEDOR ASC)
go

create table H_VENTAS(
KEY_CLIENTE int NOT NULL,
KEY_VENDEDOR int NOT NULL,
KEY_UBICACION int NOT NULL,
KEY_ARTICULO int NOT NULL,
KEY_TIEMPO int NOT NULL,
NUM_COMPROBANTE int NOT NULL,
CANTIDAD int NULL,
TOTAL_COSTO_ULTIMO decimal (10,2) NULL,
MARGEN decimal (10,2) NULL,
MARGEN_CTV decimal (10,2) NULL,
PREVIO_VTA decimal (10,2) NULL,
TOTAL_DSCTO decimal (10,2) NULL,
VENTAS_NETA decimal (10,2) NULL,
VENTAS_F decimal (10,2) NULL,
VENTAS_NETA_FACTURA decimal (10,2) NULL)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT XPKH_VENTAS PRIMARY KEY CLUSTERED (
KEY_CLIENTE ASC,
KEY_VENDEDOR ASC,
KEY_UBICACION ASC,
KEY_ARTICULO ASC,
KEY_TIEMPO ASC,
NUM_COMPROBANTE ASC)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT R_2 FOREIGN KEY (KEY_CLIENTE) REFERENCES ITEMCLIENTE (KEY_CLIENTE)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT R_3 FOREIGN KEY (KEY_VENDEDOR) REFERENCES ITEMVENDEDOR (KEY_VENDEDOR)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT R_4 FOREIGN KEY (KEY_UBICACION) REFERENCES ITEMUBICACION (KEY_UBICACION)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT R_5 FOREIGN KEY (KEY_ARTICULO) REFERENCES ITEMARTICULO (KEY_ARTICULO)
go
ALTER TABLE H_VENTAS ADD CONSTRAINT R_7 FOREIGN KEY (KEY_TIEMPO) REFERENCES ITEMTIEMPO (KEY_TIEMPO)
go
